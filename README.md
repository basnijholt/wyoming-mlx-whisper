# Wyoming MLX Whisper

[Wyoming protocol](https://github.com/rhasspy/wyoming) server for [mlx-whisper](https://pypi.org/project/mlx-whisper) speech-to-text on Apple Silicon.

Uses `mlx-community/whisper-large-v3-turbo` by default, which runs near real-time on M1 Pro and newer.

<details><summary><b><u>[ToC]</u></b> ðŸ“š</summary>

<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

- [Requirements](#requirements)
- [Installation](#installation)
  - [Using uv (recommended)](#using-uv-recommended)
  - [Using pip](#using-pip)
- [Usage](#usage)
  - [Run directly](#run-directly)
  - [Run as macOS service (launchd)](#run-as-macos-service-launchd)
- [Options](#options)
- [Development](#development)
- [Acknowledgements](#acknowledgements)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

</details>

## Requirements

- macOS with Apple Silicon (M1/M2/M3)
- Python 3.10-3.13
- [uv](https://docs.astral.sh/uv/) (recommended) or pip

## Installation

### Using uv (recommended)

```sh
git clone https://github.com/basnijholt/wyoming-mlx-whisper.git
cd wyoming-mlx-whisper
uv sync
```

### Using pip

```sh
git clone https://github.com/basnijholt/wyoming-mlx-whisper.git
cd wyoming-mlx-whisper
pip install .
```

## Usage

### Run directly

```sh
# With uv
uv run wyoming-mlx-whisper --uri tcp://0.0.0.0:7891

# Or if installed with pip
wyoming-mlx-whisper --uri tcp://0.0.0.0:7891
```

### Run as macOS service (launchd)

Install the service (starts automatically on login):

```sh
./scripts/install_service.sh
```

The server runs at `tcp://localhost:7891` by default.

Uninstall the service:

```sh
./scripts/uninstall_service.sh
```

View logs:

```sh
tail -f log/run.out log/run.err
```

## Options

<details>
<summary>See the output of <code>wyoming-mlx-whisper --help</code></summary>

<!-- CODE:BASH:START -->
<!-- echo '```' -->
<!-- uv run wyoming-mlx-whisper --help -->
<!-- echo '```' -->
<!-- CODE:END -->
<!-- OUTPUT:START -->
<!-- âš ï¸ This content is auto-generated by `markdown-code-runner`. -->
```
usage: wyoming-mlx-whisper [-h] --uri URI [--model MODEL] [--debug]

options:
  -h, --help     show this help message and exit
  --uri URI      unix:// or tcp://
  --model MODEL  Name of MLX Whisper model to use (default: mlx-community/whisper-large-v3-turbo)
  --debug        Log DEBUG messages
```

<!-- OUTPUT:END -->

</details>

## Development

```sh
uv sync
uv run pre-commit install
```

## Acknowledgements

- Forked from [vincent861223/wyoming-mlx-whisper](https://github.com/vincent861223/wyoming-mlx-whisper) by Vincent Lin
- Based on [wyoming-whisper-api-client](https://github.com/ser/wyoming-whisper-api-client) by Dr. Serge Victor
